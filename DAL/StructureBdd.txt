USE [master]
GO
/****** Object:  Database [BoVoyage]    Script Date: 14/06/2018 11:57:58 ******/
CREATE DATABASE [BoVoyage]
 CONTAINMENT = NONE
 ON  PRIMARY 
( NAME = N'BoVoyage', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL14.SQLEXPRESS\MSSQL\DATA\BoVoyage.mdf' , SIZE = 8192KB , MAXSIZE = UNLIMITED, FILEGROWTH = 65536KB )
 LOG ON 
( NAME = N'BoVoyage_log', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL14.SQLEXPRESS\MSSQL\DATA\BoVoyage_log.ldf' , SIZE = 8192KB , MAXSIZE = 2048GB , FILEGROWTH = 65536KB )
GO
ALTER DATABASE [BoVoyage] SET COMPATIBILITY_LEVEL = 140
GO
IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))
begin
EXEC [BoVoyage].[dbo].[sp_fulltext_database] @action = 'enable'
end
GO
ALTER DATABASE [BoVoyage] SET ANSI_NULL_DEFAULT OFF 
GO
ALTER DATABASE [BoVoyage] SET ANSI_NULLS OFF 
GO
ALTER DATABASE [BoVoyage] SET ANSI_PADDING OFF 
GO
ALTER DATABASE [BoVoyage] SET ANSI_WARNINGS OFF 
GO
ALTER DATABASE [BoVoyage] SET ARITHABORT OFF 
GO
ALTER DATABASE [BoVoyage] SET AUTO_CLOSE ON 
GO
ALTER DATABASE [BoVoyage] SET AUTO_SHRINK OFF 
GO
ALTER DATABASE [BoVoyage] SET AUTO_UPDATE_STATISTICS ON 
GO
ALTER DATABASE [BoVoyage] SET CURSOR_CLOSE_ON_COMMIT OFF 
GO
ALTER DATABASE [BoVoyage] SET CURSOR_DEFAULT  GLOBAL 
GO
ALTER DATABASE [BoVoyage] SET CONCAT_NULL_YIELDS_NULL OFF 
GO
ALTER DATABASE [BoVoyage] SET NUMERIC_ROUNDABORT OFF 
GO
ALTER DATABASE [BoVoyage] SET QUOTED_IDENTIFIER OFF 
GO
ALTER DATABASE [BoVoyage] SET RECURSIVE_TRIGGERS OFF 
GO
ALTER DATABASE [BoVoyage] SET  ENABLE_BROKER 
GO
ALTER DATABASE [BoVoyage] SET AUTO_UPDATE_STATISTICS_ASYNC OFF 
GO
ALTER DATABASE [BoVoyage] SET DATE_CORRELATION_OPTIMIZATION OFF 
GO
ALTER DATABASE [BoVoyage] SET TRUSTWORTHY OFF 
GO
ALTER DATABASE [BoVoyage] SET ALLOW_SNAPSHOT_ISOLATION OFF 
GO
ALTER DATABASE [BoVoyage] SET PARAMETERIZATION SIMPLE 
GO
ALTER DATABASE [BoVoyage] SET READ_COMMITTED_SNAPSHOT OFF 
GO
ALTER DATABASE [BoVoyage] SET HONOR_BROKER_PRIORITY OFF 
GO
ALTER DATABASE [BoVoyage] SET RECOVERY SIMPLE 
GO
ALTER DATABASE [BoVoyage] SET  MULTI_USER 
GO
ALTER DATABASE [BoVoyage] SET PAGE_VERIFY CHECKSUM  
GO
ALTER DATABASE [BoVoyage] SET DB_CHAINING OFF 
GO
ALTER DATABASE [BoVoyage] SET FILESTREAM( NON_TRANSACTED_ACCESS = OFF ) 
GO
ALTER DATABASE [BoVoyage] SET TARGET_RECOVERY_TIME = 60 SECONDS 
GO
ALTER DATABASE [BoVoyage] SET DELAYED_DURABILITY = DISABLED 
GO
ALTER DATABASE [BoVoyage] SET QUERY_STORE = OFF
GO
USE [BoVoyage]
GO
ALTER DATABASE SCOPED CONFIGURATION SET IDENTITY_CACHE = ON;
GO
ALTER DATABASE SCOPED CONFIGURATION SET LEGACY_CARDINALITY_ESTIMATION = OFF;
GO
ALTER DATABASE SCOPED CONFIGURATION FOR SECONDARY SET LEGACY_CARDINALITY_ESTIMATION = PRIMARY;
GO
ALTER DATABASE SCOPED CONFIGURATION SET MAXDOP = 0;
GO
ALTER DATABASE SCOPED CONFIGURATION FOR SECONDARY SET MAXDOP = PRIMARY;
GO
ALTER DATABASE SCOPED CONFIGURATION SET PARAMETER_SNIFFING = ON;
GO
ALTER DATABASE SCOPED CONFIGURATION FOR SECONDARY SET PARAMETER_SNIFFING = PRIMARY;
GO
ALTER DATABASE SCOPED CONFIGURATION SET QUERY_OPTIMIZER_HOTFIXES = OFF;
GO
ALTER DATABASE SCOPED CONFIGURATION FOR SECONDARY SET QUERY_OPTIMIZER_HOTFIXES = PRIMARY;
GO
USE [BoVoyage]
GO
/****** Object:  Table [dbo].[Agences]    Script Date: 14/06/2018 11:57:58 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Agences](
	[id_Agence] [int] IDENTITY(1,1) NOT NULL,
	[nom] [varchar](20) NULL,
 CONSTRAINT [PK__Agences__B290B2B748119F40] PRIMARY KEY CLUSTERED 
(
	[id_Agence] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Assurances]    Script Date: 14/06/2018 11:57:58 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Assurances](
	[id_Reservation] [int] NOT NULL,
	[assuranceAnnulation] [bit] NULL,
PRIMARY KEY CLUSTERED 
(
	[id_Reservation] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Clients]    Script Date: 14/06/2018 11:57:58 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Clients](
	[id_Personne] [int] IDENTITY(1,1) NOT NULL,
	[id_Reservation] [int] NULL,
	[civilite] [varchar](5) NULL,
	[nom] [varchar](15) NULL,
	[prenom] [varchar](15) NULL,
	[adresse] [varchar](30) NULL,
	[telephone] [varchar](15) NULL,
	[dateNaissance] [date] NULL,
	[email] [varchar](30) NULL,
 CONSTRAINT [PK__Clients__B0310E25EC474362] PRIMARY KEY CLUSTERED 
(
	[id_Personne] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Continents]    Script Date: 14/06/2018 11:57:58 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Continents](
	[id_Continent] [int] IDENTITY(1,1) NOT NULL,
	[nom] [varchar](15) NULL,
 CONSTRAINT [PK__Continen__23E4B41AAFFC1C7B] PRIMARY KEY CLUSTERED 
(
	[id_Continent] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Destinations]    Script Date: 14/06/2018 11:57:58 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Destinations](
	[id_Destination] [int] IDENTITY(1,1) NOT NULL,
	[id_Continent] [int] NULL,
	[id_Pays] [int] NULL,
	[id_Region] [int] NULL,
	[description] [varchar](100) NULL,
 CONSTRAINT [PK__Destinat__E4AD1CBDCFD11799] PRIMARY KEY CLUSTERED 
(
	[id_Destination] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Participants]    Script Date: 14/06/2018 11:57:58 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Participants](
	[id_Personne] [int] IDENTITY(1,1) NOT NULL,
	[id_Reservation] [int] NULL,
	[civilite] [varchar](5) NULL,
	[nom] [varchar](15) NULL,
	[prenom] [varchar](15) NULL,
	[adresse] [varchar](30) NULL,
	[telephone] [varchar](15) NULL,
	[dateNaissance] [date] NULL,
	[reduction] [decimal](18, 0) NULL,
 CONSTRAINT [PK__Particip__B0310E2577F81F82] PRIMARY KEY CLUSTERED 
(
	[id_Personne] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Pays]    Script Date: 14/06/2018 11:57:58 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Pays](
	[id_Pays] [int] IDENTITY(1,1) NOT NULL,
	[nom] [varchar](20) NULL,
 CONSTRAINT [PK__Pays__2A20CCD0162F4157] PRIMARY KEY CLUSTERED 
(
	[id_Pays] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Regions]    Script Date: 14/06/2018 11:57:58 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Regions](
	[id_Region] [int] IDENTITY(1,1) NOT NULL,
	[nom] [varchar](20) NULL,
 CONSTRAINT [PK__Regions__60EB23648471C151] PRIMARY KEY CLUSTERED 
(
	[id_Region] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Reservations]    Script Date: 14/06/2018 11:57:58 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Reservations](
	[id_Voyage] [int] NOT NULL,
	[id_Reservation] [int] IDENTITY(1,1) NOT NULL,
	[numeroCarteBancaire] [int] NULL,
	[statutAnnulation] [bit] NULL,
	[statutValidation] [bit] NULL,
	[statutAcceptation] [bit] NULL,
 CONSTRAINT [PK__Reservat__03B68AA1C99F8E6C] PRIMARY KEY CLUSTERED 
(
	[id_Reservation] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Voyages]    Script Date: 14/06/2018 11:57:58 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Voyages](
	[id_Voyage] [int] IDENTITY(1,1) NOT NULL,
	[id_Destination] [int] NULL,
	[id_Reservation] [int] NULL,
	[id_Agence] [int] NULL,
	[dateAller] [date] NULL,
	[dateRetour] [date] NULL,
	[placesDisponibles] [int] NULL,
	[tarifToutCompris] [decimal](18, 0) NULL,
 CONSTRAINT [PK__Voyages__EEAA7AB9820F5318] PRIMARY KEY CLUSTERED 
(
	[id_Voyage] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
ALTER TABLE [dbo].[Assurances]  WITH CHECK ADD  CONSTRAINT [FK_Reservation_Assurance] FOREIGN KEY([id_Reservation])
REFERENCES [dbo].[Reservations] ([id_Reservation])
GO
ALTER TABLE [dbo].[Assurances] CHECK CONSTRAINT [FK_Reservation_Assurance]
GO
ALTER TABLE [dbo].[Clients]  WITH CHECK ADD  CONSTRAINT [FK_Reservation_Client] FOREIGN KEY([id_Reservation])
REFERENCES [dbo].[Reservations] ([id_Reservation])
GO
ALTER TABLE [dbo].[Clients] CHECK CONSTRAINT [FK_Reservation_Client]
GO
ALTER TABLE [dbo].[Destinations]  WITH CHECK ADD  CONSTRAINT [FK_Continent] FOREIGN KEY([id_Continent])
REFERENCES [dbo].[Continents] ([id_Continent])
GO
ALTER TABLE [dbo].[Destinations] CHECK CONSTRAINT [FK_Continent]
GO
ALTER TABLE [dbo].[Destinations]  WITH CHECK ADD  CONSTRAINT [FK_Destinations_Pays] FOREIGN KEY([id_Pays])
REFERENCES [dbo].[Pays] ([id_Pays])
GO
ALTER TABLE [dbo].[Destinations] CHECK CONSTRAINT [FK_Destinations_Pays]
GO
ALTER TABLE [dbo].[Destinations]  WITH CHECK ADD  CONSTRAINT [FK_Destinations_Regions] FOREIGN KEY([id_Region])
REFERENCES [dbo].[Regions] ([id_Region])
GO
ALTER TABLE [dbo].[Destinations] CHECK CONSTRAINT [FK_Destinations_Regions]
GO
ALTER TABLE [dbo].[Participants]  WITH CHECK ADD  CONSTRAINT [FK_Reservation] FOREIGN KEY([id_Reservation])
REFERENCES [dbo].[Reservations] ([id_Reservation])
GO
ALTER TABLE [dbo].[Participants] CHECK CONSTRAINT [FK_Reservation]
GO
ALTER TABLE [dbo].[Reservations]  WITH CHECK ADD  CONSTRAINT [FK_Voyage] FOREIGN KEY([id_Voyage])
REFERENCES [dbo].[Voyages] ([id_Voyage])
GO
ALTER TABLE [dbo].[Reservations] CHECK CONSTRAINT [FK_Voyage]
GO
ALTER TABLE [dbo].[Voyages]  WITH CHECK ADD  CONSTRAINT [FK_Destination] FOREIGN KEY([id_Destination])
REFERENCES [dbo].[Destinations] ([id_Destination])
GO
ALTER TABLE [dbo].[Voyages] CHECK CONSTRAINT [FK_Destination]
GO
ALTER TABLE [dbo].[Voyages]  WITH CHECK ADD  CONSTRAINT [FK_Voyages_Agences] FOREIGN KEY([id_Agence])
REFERENCES [dbo].[Agences] ([id_Agence])
GO
ALTER TABLE [dbo].[Voyages] CHECK CONSTRAINT [FK_Voyages_Agences]
GO
USE [master]
GO
ALTER DATABASE [BoVoyage] SET  READ_WRITE 
GO
